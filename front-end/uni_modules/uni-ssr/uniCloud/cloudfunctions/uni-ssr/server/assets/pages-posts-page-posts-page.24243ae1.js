import{navigateTo as t,View as e,Text as s,Image as l,navigateBack as i}from"@dcloudio/uni-h5";import{_ as r}from"./uni-nav-bar.0597c604.js";import{watch as a,onMounted as o,resolveDynamicComponent as u,mergeProps as n,withCtx as _,createTextVNode as m,toDisplayString as p,openBlock as c,createBlock as d,createCommentVNode as f,createVNode as g,Fragment as h,renderList as x,useSSRContext as v,ref as y,unref as k}from"vue";import{resolveEasycom as C,onLoad as R}from"@dcloudio/uni-app";import{s as z}from"./index.9f92f74a.js";import{S as $}from"./search.cd6280e6.js";import{n as b}from"./noData.5ccf27b8.js";import{_ as j}from"./u-icon.ab49d795.js";import A from"moment";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.4543db02.js";import"@vue/shared";import"stream";import"./request.5320184e.js";import"axios";import"axios-miniprogram-adapter";import"../entry-server.mjs";import"@dcloudio/uni-cloud";import"vue-demi";import"@vue/server-renderer";import"@dcloudio/uni-shared";import"./u-button.b9b8b90d.js";import"./u-loading-icon.535cfcc8.js";const w={__name:"ArticlePropsWarp",__ssrInlineRender:!0,props:{posts:Array},setup(i){const r=i,v=t=>t.length>5?t.substring(0,5)+"...":t,y=t=>A().format("YYYY-MM-DD"),k=e=>{t({url:"/pages/article/article?id="+e})},R=t=>t=(t=t.replace(/<[^<>]+>/g,"")).replace(/&nbsp;/gi,"");return a((()=>r.posts),((t,e)=>{console.log("更改了"),console.log(r.posts)})),o((()=>{})),(t,i,a,o)=>{const $=e,b=s,A=l,I=C(u("u-icon"),j);r.posts&&r.posts.length>0?i(z.ssrRenderComponent($,n({class:"post-list"},o),{default:_(((t,e,s,l)=>{if(!e)return[(c(!0),d(h,null,x(r.posts,((t,e)=>(c(),d($,{class:"post-list__item",key:e,onClick:e=>k(t._id)},{default:_((()=>[g($,{class:"post-list__item-status"},{default:_((()=>[1==t.popular?(c(),d(b,{key:0,class:"post-list__item-status-text"},{default:_((()=>[m("热")])),_:1})):f("",!0),1==t.sticky?(c(),d(b,{key:1,class:"post-list__item-status-text"},{default:_((()=>[m("顶")])),_:1})):f("",!0),1==t.featured?(c(),d(b,{key:2,class:"post-list__item-status-text"},{default:_((()=>[m("精")])),_:1})):f("",!0),g($,{class:"post-list__item-title"},{default:_((()=>[m(p(t.title),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-content"},{default:_((()=>[m(p(R(t.content)),1)])),_:2},1024),t.images.length>0?(c(),d($,{key:0,class:"post-list__item-img"},{default:_((()=>[(c(!0),d(h,null,x(t.images.slice(0,3),((t,e)=>(c(),d(A,{key:e,src:t,class:"post-list__item-img-item",mode:"aspectFill"},null,8,["src"])))),128))])),_:2},1024)):f("",!0),g($,{class:"post-list__item-user"},{default:_((()=>[g($,{class:"post-list__item-user-left"},{default:_((()=>[g(A,{src:t.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),g($,{class:"post-list__item-user-name"},{default:_((()=>[m(p(v(t.author.username))+" ",1),g(b,{style:{"margin-left":"20upx"}},{default:_((()=>[m(p(y(t.createdAt)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right"},{default:_((()=>[g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"eye-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.views),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"thumb-up-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.like),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))];e("\x3c!--[--\x3e"),z.ssrRenderList(r.posts,((t,i)=>{e(z.ssrRenderComponent($,{class:"post-list__item",key:i,onClick:e=>k(t._id)},{default:_(((e,s,l,i)=>{if(!s)return[g($,{class:"post-list__item-status"},{default:_((()=>[1==t.popular?(c(),d(b,{key:0,class:"post-list__item-status-text"},{default:_((()=>[m("热")])),_:1})):f("",!0),1==t.sticky?(c(),d(b,{key:1,class:"post-list__item-status-text"},{default:_((()=>[m("顶")])),_:1})):f("",!0),1==t.featured?(c(),d(b,{key:2,class:"post-list__item-status-text"},{default:_((()=>[m("精")])),_:1})):f("",!0),g($,{class:"post-list__item-title"},{default:_((()=>[m(p(t.title),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-content"},{default:_((()=>[m(p(R(t.content)),1)])),_:2},1024),t.images.length>0?(c(),d($,{key:0,class:"post-list__item-img"},{default:_((()=>[(c(!0),d(h,null,x(t.images.slice(0,3),((t,e)=>(c(),d(A,{key:e,src:t,class:"post-list__item-img-item",mode:"aspectFill"},null,8,["src"])))),128))])),_:2},1024)):f("",!0),g($,{class:"post-list__item-user"},{default:_((()=>[g($,{class:"post-list__item-user-left"},{default:_((()=>[g(A,{src:t.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),g($,{class:"post-list__item-user-name"},{default:_((()=>[m(p(v(t.author.username))+" ",1),g(b,{style:{"margin-left":"20upx"}},{default:_((()=>[m(p(y(t.createdAt)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right"},{default:_((()=>[g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"eye-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.views),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"thumb-up-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.like),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)];s(z.ssrRenderComponent($,{class:"post-list__item-status"},{default:_(((e,s,l,i)=>{if(!s)return[1==t.popular?(c(),d(b,{key:0,class:"post-list__item-status-text"},{default:_((()=>[m("热")])),_:1})):f("",!0),1==t.sticky?(c(),d(b,{key:1,class:"post-list__item-status-text"},{default:_((()=>[m("顶")])),_:1})):f("",!0),1==t.featured?(c(),d(b,{key:2,class:"post-list__item-status-text"},{default:_((()=>[m("精")])),_:1})):f("",!0),g($,{class:"post-list__item-title"},{default:_((()=>[m(p(t.title),1)])),_:2},1024)];1==t.popular?s(z.ssrRenderComponent(b,{class:"post-list__item-status-text"},{default:_(((t,e,s,l)=>{if(!e)return[m("热")];e("热")})),_:2},l,i)):s("\x3c!----\x3e"),1==t.sticky?s(z.ssrRenderComponent(b,{class:"post-list__item-status-text"},{default:_(((t,e,s,l)=>{if(!e)return[m("顶")];e("顶")})),_:2},l,i)):s("\x3c!----\x3e"),1==t.featured?s(z.ssrRenderComponent(b,{class:"post-list__item-status-text"},{default:_(((t,e,s,l)=>{if(!e)return[m("精")];e("精")})),_:2},l,i)):s("\x3c!----\x3e"),s(z.ssrRenderComponent($,{class:"post-list__item-title"},{default:_(((e,s,l,i)=>{if(!s)return[m(p(t.title),1)];s(`${z.ssrInterpolate(t.title)}`)})),_:2},l,i))})),_:2},l,i)),s(z.ssrRenderComponent($,{class:"post-list__item-content"},{default:_(((e,s,l,i)=>{if(!s)return[m(p(R(t.content)),1)];s(`${z.ssrInterpolate(R(t.content))}`)})),_:2},l,i)),t.images.length>0?s(z.ssrRenderComponent($,{class:"post-list__item-img"},{default:_(((e,s,l,i)=>{if(!s)return[(c(!0),d(h,null,x(t.images.slice(0,3),((t,e)=>(c(),d(A,{key:e,src:t,class:"post-list__item-img-item",mode:"aspectFill"},null,8,["src"])))),128))];s("\x3c!--[--\x3e"),z.ssrRenderList(t.images.slice(0,3),((t,e)=>{s(z.ssrRenderComponent(A,{key:e,src:t,class:"post-list__item-img-item",mode:"aspectFill"},null,l,i))})),s("\x3c!--]--\x3e")})),_:2},l,i)):s("\x3c!----\x3e"),s(z.ssrRenderComponent($,{class:"post-list__item-user"},{default:_(((e,s,l,i)=>{if(!s)return[g($,{class:"post-list__item-user-left"},{default:_((()=>[g(A,{src:t.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),g($,{class:"post-list__item-user-name"},{default:_((()=>[m(p(v(t.author.username))+" ",1),g(b,{style:{"margin-left":"20upx"}},{default:_((()=>[m(p(y(t.createdAt)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right"},{default:_((()=>[g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"eye-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.views),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"thumb-up-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.like),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)];s(z.ssrRenderComponent($,{class:"post-list__item-user-left"},{default:_(((e,s,l,i)=>{if(!s)return[g(A,{src:t.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),g($,{class:"post-list__item-user-name"},{default:_((()=>[m(p(v(t.author.username))+" ",1),g(b,{style:{"margin-left":"20upx"}},{default:_((()=>[m(p(y(t.createdAt)),1)])),_:2},1024)])),_:2},1024)];s(z.ssrRenderComponent(A,{src:t.author.avatar,class:"post-list__item-user-avatar"},null,l,i)),s(z.ssrRenderComponent($,{class:"post-list__item-user-name"},{default:_(((e,s,l,i)=>{if(!s)return[m(p(v(t.author.username))+" ",1),g(b,{style:{"margin-left":"20upx"}},{default:_((()=>[m(p(y(t.createdAt)),1)])),_:2},1024)];s(`${z.ssrInterpolate(v(t.author.username))} `),s(z.ssrRenderComponent(b,{style:{"margin-left":"20upx"}},{default:_(((e,s,l,i)=>{if(!s)return[m(p(y(t.createdAt)),1)];s(`${z.ssrInterpolate(y(t.createdAt))}`)})),_:2},l,i))})),_:2},l,i))})),_:2},l,i)),s(z.ssrRenderComponent($,{class:"post-list__item-user-right"},{default:_(((e,s,l,i)=>{if(!s)return[g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"eye-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.views),1)])),_:2},1024)])),_:2},1024),g($,{class:"post-list__item-user-right-item"},{default:_((()=>[g(I,{name:"thumb-up-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.like),1)])),_:2},1024)])),_:2},1024)];s(z.ssrRenderComponent($,{class:"post-list__item-user-right-item"},{default:_(((e,s,l,i)=>{if(!s)return[g(I,{name:"eye-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.views),1)])),_:2},1024)];s(z.ssrRenderComponent(I,{name:"eye-fill",color:"#666",size:"15"},null,l,i)),s(z.ssrRenderComponent(b,{class:"post-list__item-user-right-item-text"},{default:_(((e,s,l,i)=>{if(!s)return[m(p(t.views),1)];s(`${z.ssrInterpolate(t.views)}`)})),_:2},l,i))})),_:2},l,i)),s(z.ssrRenderComponent($,{class:"post-list__item-user-right-item"},{default:_(((e,s,l,i)=>{if(!s)return[g(I,{name:"thumb-up-fill",color:"#666",size:"15"}),g(b,{class:"post-list__item-user-right-item-text"},{default:_((()=>[m(p(t.like),1)])),_:2},1024)];s(z.ssrRenderComponent(I,{name:"thumb-up-fill",color:"#666",size:"15"},null,l,i)),s(z.ssrRenderComponent(b,{class:"post-list__item-user-right-item-text"},{default:_(((e,s,l,i)=>{if(!s)return[m(p(t.like),1)];s(`${z.ssrInterpolate(t.like)}`)})),_:2},l,i))})),_:2},l,i))})),_:2},l,i))})),_:2},l,i))})),_:2},s,l))})),e("\x3c!--]--\x3e")})),_:1},a)):i("\x3c!----\x3e")}}},D=w.setup;w.setup=(t,e)=>{const s=v();return(s.modules||(s.modules=new Set)).add("components/ArticlePropsWarp/ArticlePropsWarp.vue"),D?D(t,e):void 0};const F=I(w,[["__scopeId","data-v-bac1fee9"]]),L={__name:"posts-page",__ssrInlineRender:!0,setup(t){const s=y(""),l=y([]),a=()=>{i()};return R((t=>{s.value=t.id,$(s.value).then((t=>{l.value=t.data}))})),(t,i,o,h)=>{const x=e,v=C(u("uni-nav-bar"),r);i(z.ssrRenderComponent(x,n({class:"search-post"},h),{default:_(((t,e,i,r)=>{if(!e)return[g(v,{"left-text":"返回",title:"结果",onClickLeft:a}),g(x,{class:"text",style:{"margin-top":"18rpx","margin-left":"18rpx","font-size":"22rpx"}},{default:_((()=>[m(p(`找到关于${s.value}的结果一共有 ${l.value.length} 条 `),1)])),_:1}),g(x,{class:{"search-posts-page":0==l.value.length}},{default:_((()=>[0==l.value.length?(c(),d(k(b),{key:0})):f("",!0),g(k(F),{posts:l.value},null,8,["posts"])])),_:1},8,["class"])];e(z.ssrRenderComponent(v,{"left-text":"返回",title:"结果",onClickLeft:a},null,i,r)),e(z.ssrRenderComponent(x,{class:"text",style:{"margin-top":"18rpx","margin-left":"18rpx","font-size":"22rpx"}},{default:_(((t,e,i,r)=>{if(!e)return[m(p(`找到关于${s.value}的结果一共有 ${l.value.length} 条 `),1)];e(`${z.ssrInterpolate(`找到关于${s.value}的结果一共有 ${l.value.length} 条 `)}`)})),_:1},i,r)),e(z.ssrRenderComponent(x,{class:{"search-posts-page":0==l.value.length}},{default:_(((t,e,s,i)=>{if(!e)return[0==l.value.length?(c(),d(k(b),{key:0})):f("",!0),g(k(F),{posts:l.value},null,8,["posts"])];0==l.value.length?e(z.ssrRenderComponent(k(b),null,null,s,i)):e("\x3c!----\x3e"),e(z.ssrRenderComponent(k(F),{posts:l.value},null,s,i))})),_:1},i,r))})),_:1},o))}}},Y=L.setup;L.setup=(t,e)=>{const s=v();return(s.modules||(s.modules=new Set)).add("pages/posts-page/posts-page.vue"),Y?Y(t,e):void 0};const P=I(L,[["__scopeId","data-v-0cff9a9f"]]);export{P as default};
