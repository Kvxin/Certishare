import{View as t}from"@dcloudio/uni-h5";import{d as e,m as i,a as s}from"../entry-server.mjs";import{nextTick as n,useSSRContext as a,mergeProps as o,withCtx as r,renderSlot as u}from"vue";import{s as d}from"./index.9f92f74a.js";import{_ as l}from"./_plugin-vue_export-helper.1b428a4d.js";const m={props:{show:{type:Boolean,default:e.transition.show},mode:{type:String,default:e.transition.mode},duration:{type:[String,Number],default:e.transition.duration},timingFunction:{type:String,default:e.transition.timingFunction}}},h=t=>({enter:`u-${t}-enter u-${t}-enter-active`,"enter-to":`u-${t}-enter-to u-${t}-enter-active`,leave:`u-${t}-leave u-${t}-leave-active`,"leave-to":`u-${t}-leave-to u-${t}-leave-active`}),c={name:"u-transition",data:()=>({inited:!1,viewStyle:{},status:"",transitionEnded:!1,display:!1,classes:""}),emits:["click","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave"],computed:{mergeStyle(){const{viewStyle:t,customStyle:e}=this;return{transitionDuration:`${this.duration}ms`,transitionTimingFunction:this.timingFunction,...uni.$u.addStyle(e),...t}}},mixins:[i,s,{methods:{clickHandler(){this.$emit("click")},async vueEnter(){const t=h(this.mode);this.status="enter",this.$emit("beforeEnter"),this.inited=!0,this.display=!0,this.classes=t.enter,await n(),await uni.$u.sleep(20),this.$emit("enter"),this.transitionEnded=!1,this.$emit("afterEnter"),this.classes=t["enter-to"]},async vueLeave(){if(!this.display)return;const t=h(this.mode);this.status="leave",this.$emit("beforeLeave"),this.classes=t.leave,await n(),this.transitionEnded=!1,this.$emit("leave"),setTimeout(this.onTransitionEnd,this.duration),this.classes=t["leave-to"]},onTransitionEnd(){this.transitionEnded||(this.transitionEnded=!0,this.$emit("leave"===this.status?"afterLeave":"afterEnter"),!this.show&&this.display&&(this.display=!1,this.inited=!1))}}},m],watch:{show:{handler(t){t?this.vueEnter():this.vueLeave()},immediate:!0}}};const v=c.setup;c.setup=(t,e)=>{const i=a();return(i.modules||(i.modules=new Set)).add("uni_modules/uview-plus/components/u-transition/u-transition.vue"),v?v(t,e):void 0};const p=l(c,[["ssrRender",function(e,i,s,n,a,l,m,h){const c=t;m.inited?i(d.ssrRenderComponent(c,o({class:["u-transition",m.classes],ref:"u-transition",onClick:e.clickHandler,style:[h.mergeStyle],onTouchmove:e.noop},n),{default:r(((t,i,s,n)=>{if(!i)return[u(e.$slots,"default",{},void 0,!0)];d.ssrRenderSlot(e.$slots,"default",{},null,i,s,n)})),_:3},s)):i("\x3c!----\x3e")}],["__scopeId","data-v-5e247d2b"]]);export{p as _};
