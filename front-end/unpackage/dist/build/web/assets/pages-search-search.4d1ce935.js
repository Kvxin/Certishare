import{g as a,h as s,o as e,b as t,w as l,H as r,i,e as c,q as o,y as u,k as n,l as d,F as h,U as p,J as f,v as m,a1 as y,j as _,s as v,L as g,t as k}from"./index-b4edc82c.js";import{_ as b}from"./u-search.7c85f57a.js";import{a as x,r as j}from"./uni-app.es.370d9c9e.js";import{_ as C}from"./uni-nav-bar.cac3dca4.js";import{g as I}from"./search.b14444a7.js";import{_ as H}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.9d2312a5.js";import"./uni-icons.ec5d01d1.js";import"./request.5e8d59d2.js";const q=H({__name:"search",setup(H){const q=a(""),w=a([]),B=a([]),L=a({display:"none"}),V=()=>{p()},F=()=>{if(""!==q.value.trim()){let a=r("searchHistory")||[];a.push(q.value),f("searchHistory",a),m({url:`/pages/search-result/search-result?searchKey=${q.value}`})}},K=()=>{y("searchHistory"),w.value=[]},S=()=>{w.value=r("searchHistory")||[]},U=a=>{m({url:`/pages/search-result/search-result?searchKey=${a}`})};return x((()=>{S()})),s((()=>{S(),I().then((a=>{B.value=a.data}))})),(a,s)=>{const r=j(_("u-search"),b),p=i,f=j(_("uni-nav-bar"),C),m=v,y=g;return e(),t(p,{class:"search-page"},{default:l((()=>[c(f,{fixed:!0,shadow:"","status-bar":"","left-icon":"left","left-text":"返回","right-text":"搜索","right-width":"30px",onClickLeft:V,onClickRight:F,height:"65px",class:"nav-bar",border:!1,gradientColors:["#ff9a9e","#fad0c4"]},{default:l((()=>[c(p,{class:"search-box"},{default:l((()=>[c(r,{placeholder:"点击进行搜索",shape:"square",clearabled:!0,actionText:"",actionStyle:L.value,modelValue:q.value,"onUpdate:modelValue":s[0]||(s[0]=a=>q.value=a)},null,8,["actionStyle","modelValue"])])),_:1})])),_:1}),c(p,{class:"search-warp"},{default:l((()=>[c(p,{class:"search-history"},{default:l((()=>[c(p,{class:"history-title"},{default:l((()=>[c(p,{class:"left"},{default:l((()=>[c(p,{class:"pin"}),c(m,null,{default:l((()=>[o("历史记录")])),_:1})])),_:1}),c(p,{class:"right",onClick:K},{default:l((()=>[u("span",null,"x")])),_:1})])),_:1}),c(p,{class:"history-body"},{default:l((()=>[c(p,{class:"history-items"},{default:l((()=>[(e(!0),n(h,null,d(w.value,((a,s)=>(e(),t(p,{class:"history-item",key:s,onClick:s=>U(a)},{default:l((()=>[o(k(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),u("div",{class:"searchBoard"},[u("div",{class:"board-titleBar"},[c(p,{class:"left"},{default:l((()=>[c(p,{class:"pin-2"}),u("span",{style:{color:"#000"}},"热点")])),_:1}),c(p,{class:"right"},{default:l((()=>[c(y,{class:"board-titleBar-txtImg",src:"https://api.myisre.cn/eba2b57a7698842033d1c4a11.png",mode:"heightFix"})])),_:1})]),u("div",{class:"rankList-type1"},[(e(!0),n(h,null,d(B.value,((s,t)=>(e(),n("div",{class:"rankItem-type1",key:a.key,onClick:a=>U(s)},[u("span",{class:"rankItem-type1-num rankItem-type1-num-act"},k(t+1),1),o(" "+k(s),1)],8,["onClick"])))),128))])])])),_:1})])),_:1})}}},[["__scopeId","data-v-73a7d2ab"]]);export{q as default};
