import{ad as s,h as t,j as e,o as a,b as l,w as i,k as r,F as o,l as u,e as p,q as _,I as m,t as n,v as c,s as f,i as d,L as g,g as v,u as h,p as y,U as k}from"./index-b4edc82c.js";import{_ as x}from"./uni-nav-bar.cac3dca4.js";import{r as j,a as b}from"./uni-app.es.370d9c9e.js";import{S as A}from"./search.b14444a7.js";import{n as I}from"./noData.9b7f0b7a.js";import{_ as Y}from"./u-icon.9d2312a5.js";import{h as q}from"./moment.dc0d6ca6.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.ec5d01d1.js";import"./request.5e8d59d2.js";import"./u-button.0cd44736.js";import"./u-loading-icon.c59f05cd.js";const C=z({__name:"ArticlePropsWarp",props:{posts:Array},setup(v){const h=v;return s((()=>h.posts),((s,t)=>{console.log("更改了"),console.log(h.posts)})),t((()=>{})),(s,t)=>{const v=f,y=d,k=g,x=j(e("u-icon"),Y);return h.posts&&h.posts.length>0?(a(),l(y,{key:0,class:"post-list"},{default:i((()=>[(a(!0),r(o,null,u(h.posts,((s,t)=>(a(),l(y,{class:"post-list__item",key:t,onClick:t=>{return e=s._id,void c({url:"/pages/article/article?id="+e});var e}},{default:i((()=>[p(y,{class:"post-list__item-status"},{default:i((()=>[1==s.popular?(a(),l(v,{key:0,class:"post-list__item-status-text"},{default:i((()=>[_("热")])),_:1})):m("",!0),1==s.sticky?(a(),l(v,{key:1,class:"post-list__item-status-text"},{default:i((()=>[_("顶")])),_:1})):m("",!0),1==s.featured?(a(),l(v,{key:2,class:"post-list__item-status-text"},{default:i((()=>[_("精")])),_:1})):m("",!0),p(y,{class:"post-list__item-title"},{default:i((()=>[_(n(s.title),1)])),_:2},1024)])),_:2},1024),p(y,{class:"post-list__item-content"},{default:i((()=>{return[_(n((t=s.summary,t=(t=t.replace(/<[^<>]+>/g,"")).replace(/&nbsp;/gi,""))),1)];var t})),_:2},1024),s.images.length>0?(a(),l(y,{key:0,class:"post-list__item-img"},{default:i((()=>[(a(!0),r(o,null,u(s.images.slice(0,3),((s,t)=>(a(),l(k,{key:t,src:s,class:"post-list__item-img-item",mode:"aspectFill"},null,8,["src"])))),128))])),_:2},1024)):m("",!0),p(y,{class:"post-list__item-user"},{default:i((()=>[p(y,{class:"post-list__item-user-left"},{default:i((()=>[p(k,{src:s.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),p(y,{class:"post-list__item-user-name"},{default:i((()=>{return[_(n((t=s.author.username,t.length>5?t.substring(0,5)+"...":t))+" ",1),p(v,{style:{"margin-left":"20upx"}},{default:i((()=>[_(n((s.createdAt,q().format("YYYY-MM-DD"))),1)])),_:2},1024)];var t})),_:2},1024)])),_:2},1024),p(y,{class:"post-list__item-user-right"},{default:i((()=>[p(y,{class:"post-list__item-user-right-item"},{default:i((()=>[p(x,{name:"eye-fill",color:"#666",size:"15"}),p(v,{class:"post-list__item-user-right-item-text"},{default:i((()=>[_(n(s.views),1)])),_:2},1024)])),_:2},1024),p(y,{class:"post-list__item-user-right-item"},{default:i((()=>[p(x,{name:"thumb-up-fill",color:"#666",size:"15"}),p(v,{class:"post-list__item-user-right-item-text"},{default:i((()=>[_(n(s.like),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)}}},[["__scopeId","data-v-0c215a2f"]]),D=z({__name:"posts-page",setup(s){const t=v(""),r=v([]),o=v(""),u=()=>{k()};return b((s=>{t.value=s.id,o.value=`搜索结果:${t.value}`,A(t.value).then((s=>{r.value=s.data}))})),(s,c)=>{const f=j(e("uni-nav-bar"),x),g=d;return a(),l(g,{class:"search-post"},{default:i((()=>[p(f,{"left-text":"返回",title:o.value,onClickLeft:u},null,8,["title"]),p(g,{class:"text",style:{"margin-top":"18rpx","margin-left":"18rpx","font-size":"22rpx"}},{default:i((()=>[_(n(`找到关于${t.value}的结果一共有 ${r.value.length} 条 `),1)])),_:1}),p(g,{class:y({"search-posts-page":0==r.value.length})},{default:i((()=>[0==r.value.length?(a(),l(h(I),{key:0})):m("",!0),p(h(C),{posts:r.value},null,8,["posts"])])),_:1},8,["class"])])),_:1})}}},[["__scopeId","data-v-865430c5"]]);export{D as default};
