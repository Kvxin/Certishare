import{g as e,o as a,b as s,w as l,i as t,e as o,y as n,k as u,l as r,F as i,n as c,q as d,z as f,v as p,j as v,p as _,t as m}from"./index-b4edc82c.js";import{_ as w}from"./u-button.0cd44736.js";import{a as g,r as k}from"./uni-app.es.370d9c9e.js";import{s as y}from"./request.5e8d59d2.js";import{u as h}from"./userStore.7c6883df.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.c59f05cd.js";import"./u-icon.9d2312a5.js";const x=j({__name:"knowledge",setup(j){const x=h().userData,C=e([]),b=e([]),q=e(0),z=e(0),I=(e,a)=>C.value[e].answerKey===a,K=()=>{0!=z.value?(z.value--,q.value+=704):f({title:"已经是第一题了",icon:"none"})},S=()=>{9!=z.value?(z.value++,q.value-=704):f({title:"已经是最后一题了",icon:"none"})},D=()=>{f({title:"正在提交答案...",icon:"loading"});const e={userAnswers:C.value,userId:x.id};var a;(a=e,y({url:"/post-answer",method:"POST",params:{data:a}})).then((e=>{p({url:`/pages/answer-result/answer-result?result=${JSON.stringify(e.data)}`})})).catch((e=>{console.log(e)}))};return g((e=>{(function(e,a){return y({url:"/getQuestion",method:"GET",params:{data:e,userId:a}})})(e.selectQuestionList,x.id).then((e=>{b.value=e.data.data,b.value.forEach((e=>{const a={_id:e._id,answerKey:""};C.value.push(a)}))}))})),(e,f)=>{const p=t,g=k(v("u-button"),w);return a(),s(p,{class:"knowledge-page"},{default:l((()=>[o(p,{class:"knowledge-warp"},{default:l((()=>[o(p,{class:"knowledge-title"},{default:l((()=>[n("h2",{style:{color:"#fff"}},"知识问答")])),_:1}),o(p,{class:"point"},{default:l((()=>[(a(),u(i,null,r(10,(e=>n("span",{key:e,class:_({active:e<z.value}),onClick:a=>(e=>{z.value=e,q.value=-352*e*2})(e)},null,10,["onClick"]))),64))])),_:1}),o(p,{class:"knowledge-card-warp"},{default:l((()=>[o(p,{class:"knowledge-cards",style:c({left:q.value+"rpx"})},{default:l((()=>[(a(!0),u(i,null,r(b.value,((e,t)=>(a(),s(p,{class:"knowledge-card",key:t},{default:l((()=>[o(p,{class:"title"},{default:l((()=>[n("span",null,m(e.title),1)])),_:2},1024),o(p,{class:"options"},{default:l((()=>[(a(!0),u(i,null,r(e.optionsData,((e,o)=>(a(),s(p,{class:_(["option",{active:I(t,o)}]),onClick:e=>((e,a,s)=>{C.value[s].answerKey=a})(0,o,t)},{default:l((()=>[d(m(o)+". "+m(e),1)])),_:2},1032,["onClick","class"])))),256))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"])])),_:1}),o(p,{class:"knowledge-buttons"},{default:l((()=>[o(p,{class:"previous",style:{color:"#fff","font-size":"14px","font-weight":"700"},onClick:K},{default:l((()=>[d(" 上一题 ")])),_:1}),o(g,{type:"primary",style:{width:"200rpx"},onClick:D},{default:l((()=>[d("提交")])),_:1}),o(p,{class:"next",style:{color:"#fff","font-size":"14px","font-weight":"700"},onClick:S},{default:l((()=>[d(" 下一题 ")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-e4710b16"]]);export{x as default};
