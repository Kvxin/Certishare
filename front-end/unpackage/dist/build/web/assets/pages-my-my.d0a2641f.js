import{g as t,V as a,h as l,o as s,b as e,w as o,H as n,W as c,i as u,e as i,q as r,t as d,I as f,k as _,l as m,F as p,v as g,z as v,X as x,L as h,s as y,j as w,Y as b}from"./index-b4edc82c.js";import{_ as k}from"./u-button.0cd44736.js";import{r as j}from"./uni-app.es.370d9c9e.js";import{g as C}from"./user.ef1f9281.js";import{u as H}from"./userStore.7c6883df.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.c59f05cd.js";import"./u-icon.9d2312a5.js";import"./request.5e8d59d2.js";const $=L({__name:"my",setup(L){const $=H(),q=t({}),z=t({}),F=t(),I=t(""),M=a([{num:"-",text:"我的卡片",path:"my-post"},{num:"-",text:"我的帖子",path:"my-post"},{num:"-",text:"历史记录",path:"my-local"}]),T=a([{icon:"&#xe791;",text:"随机测试",path:"answer"},{icon:"",text:"签到",path:"sign"},{icon:"",text:"我的发布",path:"my-post"},{icon:"",text:"答题数据"}]),V=()=>{g({url:"/pages/login/login"})},B=t=>{g({url:`/pages/${t.path}/${t.path}`})},D=()=>{const t=n("userData");return t?(q.value=t,F.value=!0):F.value=!1,!!t},S=()=>{q?($.logout(),v({title:"退出成功",icon:"none"}),x({url:"/pages/login/login"})):v({title:"当前未登录账号",icon:"none"})};return l((async()=>{(()=>{const t=c();console.log(t),I.value=`v${t.appVersion}`})(),D()&&C(q.value._id).then((t=>{console.log("成功了"),z.value=t.data,(()=>{const t=z.value.cardLength,a=z.value.posts.length,l=z.value.watchedCardHistory.length;M[0].num=t,M[1].num=a,M[2].num=l})()})).catch((t=>{console.log("失败了"),console.log(t)}))})),(t,a)=>{const l=h,n=y,c=u,x=j(w("up-button"),k),C=b;return s(),e(c,{class:"center warp"},{default:o((()=>[i(c,{class:"bg center my-warp"},{default:o((()=>[F.value?(s(),e(c,{key:0,class:"logo","hover-class":F.value?"":"logo-hover"},{default:o((()=>[i(l,{class:"logo-img",src:F.value?q.value.avatar:t.avatarUrl},null,8,["src"]),i(c,{class:"logo-title"},{default:o((()=>[i(n,{class:"uer-name"},{default:o((()=>[r(d(F.value?q.value.username:"您未登录"),1)])),_:1}),i(n,{class:"uer-uid"})])),_:1})])),_:1},8,["hover-class"])):f("",!0),F.value?f("",!0):(s(),e(c,{key:1,class:"logo-no-login"},{default:o((()=>[i(c,{class:"login-button"},{default:o((()=>[i(x,{type:"primary",text:"点击登录",onClick:V})])),_:1})])),_:1})),i(c,{class:"count"},{default:o((()=>[(s(!0),_(p,null,m(M,((t,a)=>(s(),e(c,{class:"count-item",onClick:a=>B(t)},{default:o((()=>[i(n,{class:"count-item-num"},{default:o((()=>[r(d(t.num),1)])),_:2},1024),i(n,{class:"count-item-text"},{default:o((()=>[r(d(t.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),i(c,{class:"center-nav margin-top"},{default:o((()=>[i(c,{class:"center-nav-title"},{default:o((()=>[i(n,{style:{"font-size":"18px"}},{default:o((()=>[r("快捷入口")])),_:1})])),_:1}),i(c,{class:"center-nav-content"},{default:o((()=>[(s(!0),_(p,null,m(T,((t,a)=>(s(),e(c,{class:"center-nav-item",key:t.path,onClick:a=>B(t)},{default:o((()=>[i(n,{class:"iconfont-color nav-item-color",style:{width:"64px",height:"64px"},innerHTML:t.icon},null,8,["innerHTML"]),i(n,{class:"center-nav-item-text"},{default:o((()=>[r(d(t.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),i(c,{class:"center-list"},{default:o((()=>[i(C,{url:"/pages/message/message"},{default:o((()=>[i(c,{class:"center-list-item"},{default:o((()=>[i(n,{class:"list-icon color-2"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text"},{default:o((()=>[r("新消息通知")])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1}),i(c,{class:"center-list-item",onClick:a[0]||(a[0]=t=>{D()?g({url:`/pages/setting/setting?id=${q.value.id}`}):v({title:"未登录",icon:"none"})})},{default:o((()=>[i(n,{class:"list-icon color-2"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text"},{default:o((()=>[r("修改个人信息")])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1}),i(c,{class:"center-list"},{default:o((()=>[i(c,{class:"center-list-item border-bottom"},{default:o((()=>[i(n,{class:"list-icon color-3"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text"},{default:o((()=>[r("帮助与反馈")])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1}),i(c,{class:"center-list-item"},{default:o((()=>[i(n,{class:"list-icon color-4"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text"},{default:o((()=>[r("服务条款及隐私")])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1}),i(c,{class:"center-list"},{default:o((()=>[i(c,{class:"center-list-item border-bottom"},{default:o((()=>[i(n,{class:"list-icon color-1"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text",onClick:S},{default:o((()=>[r("退出登录")])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1}),i(c,{class:"center-list-item"},{default:o((()=>[i(n,{class:"list-icon color-1"},{default:o((()=>[r("")])),_:1}),i(n,{class:"list-text"},{default:o((()=>[r("关于应用")])),_:1}),i(n,{style:{color:"#999"}},{default:o((()=>[r(d(I.value),1)])),_:1}),i(n,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-5b7af87b"]]);export{$ as default};
