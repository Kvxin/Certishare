import{g as t,W as a,h as s,o as e,b as l,w as o,H as c,i as n,e as u,q as r,t as i,I as d,k as f,l as m,F as _,v as p,z as g,X as v,L as x,s as h,j as y,Y as k}from"./index-00d60881.js";import{_ as w}from"./u-button.ee418497.js";import{r as j}from"./uni-app.es.321125a8.js";import{g as b}from"./user.13d70f2c.js";import{u as C}from"./userStore.15830dc1.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.24b0e379.js";import"./u-icon.69362ebb.js";import"./request.708de9e4.js";const z=q({__name:"my",setup(q){const z=C(),D=t({}),H=t({}),I=t(),L=a([{num:"-",text:"我的卡片",path:"my-post"},{num:"-",text:"我的帖子",path:"my-post"},{num:"-",text:"历史记录",path:"my-local"}]),$=a([{icon:"",text:"随机测试",path:"answer"},{icon:"",text:"签到",path:"sign"},{icon:"",text:"我的发布",path:"my-post"},{icon:"",text:"答题数据"}]),A=()=>{p({url:"/pages/login/login"})},F=t=>{p({url:`/pages/${t.path}/${t.path}`})},S=()=>{D?(z.logout(),g({title:"退出成功",icon:"none"}),v({url:"/pages/login/login"})):g({title:"当前未登录账号",icon:"none"})};return s((async()=>{(()=>{const t=c("userData");return t?(D.value=t,I.value=!0):I.value=!1,!!t})()&&b(D.id).then((t=>{console.log("成功了"),H.value=t.data,(()=>{const t=H.value.cardLength,a=H.value.posts.length,s=H.value.watchedCardHistory.length;L[0].num=t,L[1].num=a,L[2].num=s})()})).catch((t=>{console.log("失败了"),console.log(t)}))})),(t,a)=>{const s=x,c=h,p=n,g=j(y("up-button"),w),v=k;return e(),l(p,{class:"center warp"},{default:o((()=>[u(p,{class:"bg center my-warp"},{default:o((()=>[I.value?(e(),l(p,{key:0,class:"logo","hover-class":I.value?"":"logo-hover"},{default:o((()=>[u(s,{class:"logo-img",src:I.value?D.value.avatar:t.avatarUrl},null,8,["src"]),u(p,{class:"logo-title"},{default:o((()=>[u(c,{class:"uer-name"},{default:o((()=>[r(i(I.value?D.value.username:"您未登录"),1)])),_:1}),u(c,{class:"uer-uid"})])),_:1})])),_:1},8,["hover-class"])):d("",!0),I.value?d("",!0):(e(),l(p,{key:1,class:"logo-no-login"},{default:o((()=>[u(p,{class:"login-button"},{default:o((()=>[u(g,{type:"primary",text:"点击登录",onClick:A})])),_:1})])),_:1})),u(p,{class:"count"},{default:o((()=>[(e(!0),f(_,null,m(L,((t,a)=>(e(),l(p,{class:"count-item",onClick:a=>F(t)},{default:o((()=>[u(c,{class:"count-item-num"},{default:o((()=>[r(i(t.num),1)])),_:2},1024),u(c,{class:"count-item-text"},{default:o((()=>[r(i(t.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),u(p,{class:"center-nav margin-top"},{default:o((()=>[u(p,{class:"center-nav-title"},{default:o((()=>[u(c,{style:{"font-size":"18px"}},{default:o((()=>[r("快捷入口")])),_:1})])),_:1}),u(p,{class:"center-nav-content"},{default:o((()=>[(e(!0),f(_,null,m($,((t,a)=>(e(),l(p,{class:"center-nav-item",key:t.path,onClick:a=>F(t)},{default:o((()=>[u(c,{class:"iconfont-color nav-item-color",style:{width:"64px",height:"64px"}},{default:o((()=>[r(i(t.icon),1)])),_:2},1024),u(c,{class:"center-nav-item-text"},{default:o((()=>[r(i(t.text),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),u(p,{class:"center-list"},{default:o((()=>[u(v,{url:"/pages/message/message"},{default:o((()=>[u(p,{class:"center-list-item"},{default:o((()=>[u(c,{class:"list-icon color-2"},{default:o((()=>[r("")])),_:1}),u(c,{class:"list-text"},{default:o((()=>[r("新消息通知")])),_:1}),u(c,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1})])),_:1}),u(p,{class:"center-list"},{default:o((()=>[u(p,{class:"center-list-item border-bottom"},{default:o((()=>[u(c,{class:"list-icon color-3"},{default:o((()=>[r("")])),_:1}),u(c,{class:"list-text"},{default:o((()=>[r("帮助与反馈")])),_:1}),u(c,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1}),u(p,{class:"center-list-item"},{default:o((()=>[u(c,{class:"list-icon color-4"},{default:o((()=>[r("")])),_:1}),u(c,{class:"list-text"},{default:o((()=>[r("服务条款及隐私")])),_:1}),u(c,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1}),u(p,{class:"center-list"},{default:o((()=>[u(p,{class:"center-list-item border-bottom"},{default:o((()=>[u(c,{class:"list-icon color-1"},{default:o((()=>[r("")])),_:1}),u(c,{class:"list-text",onClick:S},{default:o((()=>[r("退出登录")])),_:1}),u(c,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1}),u(p,{class:"center-list-item"},{default:o((()=>[u(c,{class:"list-icon color-1"},{default:o((()=>[r("")])),_:1}),u(c,{class:"list-text"},{default:o((()=>[r("关于应用")])),_:1}),u(c,{class:"navigat-arrow"},{default:o((()=>[r("")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-07f75fad"]]);export{z as default};
