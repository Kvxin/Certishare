import{d as e,m as t,a as i,o as r,b as a,w as o,p as n,n as d,e as s,I as l,k as u,F as c,l as p,i as g,an as h,j as y,q as m,t as w,r as _,L as f,M as S,s as b,S as v,B as I}from"./index-00d60881.js";import{_ as $}from"./u-loading-icon.24b0e379.js";import{r as k}from"./uni-app.es.321125a8.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as M}from"./u-icon.69362ebb.js";import{_ as U}from"./u-transition.2954decb.js";const x=C({name:"u-swiper-indicator",mixins:[t,i,{props:{length:{type:[String,Number],default:e.swiperIndicator.length},current:{type:[String,Number],default:e.swiperIndicator.current},indicatorActiveColor:{type:String,default:e.swiperIndicator.indicatorActiveColor},indicatorInactiveColor:{type:String,default:e.swiperIndicator.indicatorInactiveColor},indicatorMode:{type:String,default:e.swiperIndicator.indicatorMode}}}],data:()=>({lineWidth:22}),computed:{lineStyle(){let e={};return e.width=uni.$u.addUnit(this.lineWidth),e.transform=`translateX(${uni.$u.addUnit(this.current*this.lineWidth)})`,e.backgroundColor=this.indicatorActiveColor,e},dotStyle(){return e=>{let t={};return t.backgroundColor=e===this.current?this.indicatorActiveColor:this.indicatorInactiveColor,t}}}},[["render",function(e,t,i,h,y,m){const w=g;return r(),a(w,{class:"u-swiper-indicator"},{default:o((()=>["line"===e.indicatorMode?(r(),a(w,{key:0,class:n(["u-swiper-indicator__wrapper",[`u-swiper-indicator__wrapper--${e.indicatorMode}`]]),style:d({width:e.$u.addUnit(y.lineWidth*e.length),backgroundColor:e.indicatorInactiveColor})},{default:o((()=>[s(w,{class:"u-swiper-indicator__wrapper--line__bar",style:d([m.lineStyle])},null,8,["style"])])),_:1},8,["class","style"])):l("",!0),"dot"===e.indicatorMode?(r(),a(w,{key:1,class:"u-swiper-indicator__wrapper"},{default:o((()=>[(r(!0),u(c,null,p(e.length,((t,i)=>(r(),a(w,{class:n(["u-swiper-indicator__wrapper__dot",[i===e.current&&"u-swiper-indicator__wrapper__dot--active"]]),key:i,style:d([m.dotStyle(i)])},null,8,["class","style"])))),128))])),_:1})):l("",!0)])),_:1})}],["__scopeId","data-v-7a79e5f1"]]);const N=C({name:"u-swiper",mixins:[t,i,{props:{list:{type:Array,default:e.swiper.list},indicator:{type:Boolean,default:e.swiper.indicator},indicatorActiveColor:{type:String,default:e.swiper.indicatorActiveColor},indicatorInactiveColor:{type:String,default:e.swiper.indicatorInactiveColor},indicatorStyle:{type:[String,Object],default:e.swiper.indicatorStyle},indicatorMode:{type:String,default:e.swiper.indicatorMode},autoplay:{type:Boolean,default:e.swiper.autoplay},current:{type:[String,Number],default:e.swiper.current},currentItemId:{type:String,default:e.swiper.currentItemId},interval:{type:[String,Number],default:e.swiper.interval},duration:{type:[String,Number],default:e.swiper.duration},circular:{type:Boolean,default:e.swiper.circular},previousMargin:{type:[String,Number],default:e.swiper.previousMargin},nextMargin:{type:[String,Number],default:e.swiper.nextMargin},acceleration:{type:Boolean,default:e.swiper.acceleration},displayMultipleItems:{type:Number,default:e.swiper.displayMultipleItems},easingFunction:{type:String,default:e.swiper.easingFunction},keyName:{type:String,default:e.swiper.keyName},imgMode:{type:String,default:e.swiper.imgMode},height:{type:[String,Number],default:e.swiper.height},bgColor:{type:String,default:e.swiper.bgColor},radius:{type:[String,Number],default:e.swiper.radius},loading:{type:Boolean,default:e.swiper.loading},showTitle:{type:Boolean,default:e.swiper.showTitle}}}],data:()=>({currentIndex:0}),watch:{current(e,t){e!==t&&(this.currentIndex=e)}},emits:["click","change"],computed:{itemStyle(){return e=>{const t={};return this.nextMargin&&this.previousMargin&&(t.borderRadius=uni.$u.addUnit(this.radius),e!==this.currentIndex&&(t.transform="scale(0.92)")),t}}},methods:{getItemType(e){return"string"==typeof e?uni.$u.test.video(this.getSource(e))?"video":"image":"object"==typeof e&&this.keyName?e.type?"image"===e.type?"image":"video"===e.type?"video":"image":uni.$u.test.video(this.getSource(e))?"video":"image":void 0},getSource(e){return"string"==typeof e?e:"object"==typeof e&&this.keyName?e[this.keyName]:(uni.$u.error("请按格式传递列表参数"),"")},change(e){const{current:t}=e.detail;this.pauseVideo(this.currentIndex),this.currentIndex=t,this.$emit("change",e.detail)},pauseVideo(e){const t=this.getSource(this.list[e]);if(uni.$u.test.video(t)){h(`video-${e}`,this).pause()}},getPoster:e=>"object"==typeof e&&e.poster?e.poster:"",clickHandler(e){this.$emit("click",e)}}},[["render",function(e,t,i,n,h,C){const M=k(y("u-loading-icon"),$),U=g,N=f,B=S,E=b,L=v,j=I,A=k(y("u-swiper-indicator"),x);return r(),a(U,{class:"u-swiper",style:d({backgroundColor:e.bgColor,height:e.$u.addUnit(e.height),borderRadius:e.$u.addUnit(e.radius)})},{default:o((()=>[e.loading?(r(),a(U,{key:0,class:"u-swiper__loading"},{default:o((()=>[s(M,{mode:"circle"})])),_:1})):(r(),a(j,{key:1,class:"u-swiper__wrapper",style:d({height:e.$u.addUnit(e.height)}),onChange:C.change,circular:e.circular,interval:e.interval,duration:e.duration,autoplay:e.autoplay,current:e.current,currentItemId:e.currentItemId,previousMargin:e.$u.addUnit(e.previousMargin),nextMargin:e.$u.addUnit(e.nextMargin),acceleration:e.acceleration,displayMultipleItems:e.displayMultipleItems,easingFunction:e.easingFunction},{default:o((()=>[(r(!0),u(c,null,p(e.list,((t,i)=>(r(),a(L,{class:"u-swiper__wrapper__item",key:i},{default:o((()=>[s(U,{class:"u-swiper__wrapper__item__wrapper",style:d([C.itemStyle(i)])},{default:o((()=>["image"===C.getItemType(t)?(r(),a(N,{key:0,class:"u-swiper__wrapper__item__wrapper__image",src:C.getSource(t),mode:e.imgMode,onClick:e=>C.clickHandler(i),style:d({height:e.$u.addUnit(e.height),borderRadius:e.$u.addUnit(e.radius)})},null,8,["src","mode","onClick","style"])):l("",!0),"video"===C.getItemType(t)?(r(),a(B,{key:1,class:"u-swiper__wrapper__item__wrapper__video",id:`video-${i}`,"enable-progress-gesture":!1,src:C.getSource(t),poster:C.getPoster(t),title:e.showTitle&&e.$u.test.object(t)&&t.title?t.title:"",style:d({height:e.$u.addUnit(e.height)}),controls:"",onClick:e=>C.clickHandler(i)},null,8,["id","src","poster","title","style","onClick"])):l("",!0),e.showTitle&&e.$u.test.object(t)&&t.title&&e.$u.test.image(C.getSource(t))?(r(),a(E,{key:2,class:"u-swiper__wrapper__item__wrapper__title u-line-1"},{default:o((()=>[m(w(t.title),1)])),_:2},1024)):l("",!0)])),_:2},1032,["style"])])),_:2},1024)))),128))])),_:1},8,["style","onChange","circular","interval","duration","autoplay","current","currentItemId","previousMargin","nextMargin","acceleration","displayMultipleItems","easingFunction"])),s(U,{class:"u-swiper__indicator",style:d([e.$u.addStyle(e.indicatorStyle)])},{default:o((()=>[_(e.$slots,"indicator",{},(()=>[e.loading||!e.indicator||e.showTitle?l("",!0):(r(),a(A,{key:0,indicatorActiveColor:e.indicatorActiveColor,indicatorInactiveColor:e.indicatorInactiveColor,length:e.list.length,current:h.currentIndex,indicatorMode:e.indicatorMode},null,8,["indicatorActiveColor","indicatorInactiveColor","length","current","indicatorMode"]))]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-0a7a7279"]]);const B=C({name:"u-image",mixins:[t,i,{props:{src:{type:String,default:e.image.src},mode:{type:String,default:e.image.mode},width:{type:[String,Number],default:e.image.width},height:{type:[String,Number],default:e.image.height},shape:{type:String,default:e.image.shape},radius:{type:[String,Number],default:e.image.radius},lazyLoad:{type:Boolean,default:e.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:e.image.showMenuByLongpress},loadingIcon:{type:String,default:e.image.loadingIcon},errorIcon:{type:String,default:e.image.errorIcon},showLoading:{type:Boolean,default:e.image.showLoading},showError:{type:Boolean,default:e.image.showError},fade:{type:Boolean,default:e.image.fade},webp:{type:Boolean,default:e.image.webp},duration:{type:[String,Number],default:e.image.duration},bgColor:{type:String,default:e.image.bgColor}}}],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),e.overflow=this.radius>0?"hidden":"visible",uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{onClick(){this.$emit("click")},onErrorHandler(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(e,t,i,n,u,c){const p=f,h=k(y("u-icon"),M),m=g,w=k(y("u-transition"),U);return r(),a(w,{mode:"fade",show:u.show,duration:e.fade?1e3:0},{default:o((()=>[s(m,{class:"u-image",onClick:c.onClick,style:d([c.wrapStyle,u.backgroundStyle])},{default:o((()=>[u.isError?l("",!0):(r(),a(p,{key:0,src:e.src,mode:e.mode,onError:c.onErrorHandler,onLoad:c.onLoadHandler,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad,class:"u-image__image",style:d({borderRadius:"circle"==e.shape?"10000px":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),e.showLoading&&u.loading?(r(),a(m,{key:1,class:"u-image__loading",style:d({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),backgroundColor:this.bgColor,width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:o((()=>[_(e.$slots,"loading",{},(()=>[s(h,{name:e.loadingIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):l("",!0),e.showError&&u.isError&&!u.loading?(r(),a(m,{key:2,class:"u-image__error",style:d({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:o((()=>[_(e.$slots,"error",{},(()=>[s(h,{name:e.errorIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):l("",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-8a0437fe"]]);export{N as _,B as a};
