import{ae as s,h as t,j as e,o as a,b as l,w as i,k as r,F as o,l as u,e as p,q as _,I as n,t as c,v as m,s as f,i as d,L as g,g as h,u as v,p as k,V as x}from"./index-00d60881.js";import{_ as j}from"./uni-nav-bar.4d3ebaa8.js";import{r as y,a as b}from"./uni-app.es.321125a8.js";import{S as z}from"./search.4f2a8352.js";import{n as A}from"./noData.cb5aeaa4.js";import{_ as Y}from"./u-icon.69362ebb.js";import{h as C}from"./moment.dc0d6ca6.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.3d408e16.js";import"./request.708de9e4.js";import"./u-button.ee418497.js";import"./u-loading-icon.24b0e379.js";const F=D({__name:"ArticlePropsWarp",props:{posts:Array},setup(h){const v=h;return s((()=>v.posts),((s,t)=>{console.log("更改了"),console.log(v.posts)})),t((()=>{})),(s,t)=>{const h=f,k=d,x=g,j=y(e("u-icon"),Y);return v.posts&&v.posts.length>0?(a(),l(k,{key:0,class:"post-list"},{default:i((()=>[(a(!0),r(o,null,u(v.posts,((s,t)=>(a(),l(k,{class:"post-list__item",key:t,onClick:t=>{return e=s._id,void m({url:"/pages/article/article?id="+e});var e}},{default:i((()=>[p(k,{class:"post-list__item-status"},{default:i((()=>[1==s.popular?(a(),l(h,{key:0,class:"post-list__item-status-text"},{default:i((()=>[_("热")])),_:1})):n("",!0),1==s.sticky?(a(),l(h,{key:1,class:"post-list__item-status-text"},{default:i((()=>[_("顶")])),_:1})):n("",!0),1==s.featured?(a(),l(h,{key:2,class:"post-list__item-status-text"},{default:i((()=>[_("精")])),_:1})):n("",!0),p(k,{class:"post-list__item-title"},{default:i((()=>[_(c(s.title),1)])),_:2},1024)])),_:2},1024),p(k,{class:"post-list__item-content"},{default:i((()=>{return[_(c((t=s.content,t=(t=t.replace(/<[^<>]+>/g,"")).replace(/&nbsp;/gi,""))),1)];var t})),_:2},1024),s.images.length>0?(a(),l(k,{key:0,class:"post-list__item-img"},{default:i((()=>[(a(!0),r(o,null,u(s.images.slice(0,3),((s,t)=>(a(),l(x,{key:t,src:s,class:"post-list__item-img-item",mode:"aspectFill"},null,8,["src"])))),128))])),_:2},1024)):n("",!0),p(k,{class:"post-list__item-user"},{default:i((()=>[p(k,{class:"post-list__item-user-left"},{default:i((()=>[p(x,{src:s.author.avatar,class:"post-list__item-user-avatar"},null,8,["src"]),p(k,{class:"post-list__item-user-name"},{default:i((()=>{return[_(c((t=s.author.username,t.length>5?t.substring(0,5)+"...":t))+" ",1),p(h,{style:{"margin-left":"20upx"}},{default:i((()=>[_(c((s.createdAt,C().format("YYYY-MM-DD"))),1)])),_:2},1024)];var t})),_:2},1024)])),_:2},1024),p(k,{class:"post-list__item-user-right"},{default:i((()=>[p(k,{class:"post-list__item-user-right-item"},{default:i((()=>[p(j,{name:"eye-fill",color:"#666",size:"15"}),p(h,{class:"post-list__item-user-right-item-text"},{default:i((()=>[_(c(s.views),1)])),_:2},1024)])),_:2},1024),p(k,{class:"post-list__item-user-right-item"},{default:i((()=>[p(j,{name:"thumb-up-fill",color:"#666",size:"15"}),p(h,{class:"post-list__item-user-right-item-text"},{default:i((()=>[_(c(s.like),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):n("",!0)}}},[["__scopeId","data-v-bac1fee9"]]),I=D({__name:"posts-page",setup(s){const t=h(""),r=h([]),o=()=>{x()};return b((s=>{t.value=s.id,z(t.value).then((s=>{r.value=s.data}))})),(s,u)=>{const m=y(e("uni-nav-bar"),j),f=d;return a(),l(f,{class:"search-post"},{default:i((()=>[p(m,{"left-text":"返回",title:"结果",onClickLeft:o}),p(f,{class:"text",style:{"margin-top":"18rpx","margin-left":"18rpx","font-size":"22rpx"}},{default:i((()=>[_(c(`找到关于${t.value}的结果一共有 ${r.value.length} 条 `),1)])),_:1}),p(f,{class:k({"search-posts-page":0==r.value.length})},{default:i((()=>[0==r.value.length?(a(),l(v(A),{key:0})):n("",!0),p(v(F),{posts:r.value},null,8,["posts"])])),_:1},8,["class"])])),_:1})}}},[["__scopeId","data-v-0cff9a9f"]]);export{I as default};
