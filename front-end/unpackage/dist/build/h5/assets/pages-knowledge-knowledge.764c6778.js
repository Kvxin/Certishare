import{g as e,o as a,b as s,w as l,i as t,e as o,y as n,k as u,l as r,F as i,n as c,q as d,z as p,v as f,j as v,p as _,t as w}from"./index-00d60881.js";import{_ as m}from"./u-button.ee418497.js";import{a as g,r as k}from"./uni-app.es.321125a8.js";import{s as y}from"./request.708de9e4.js";import{u as h}from"./userStore.15830dc1.js";import{_ as j}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.24b0e379.js";import"./u-icon.69362ebb.js";const x=j({__name:"knowledge",setup(j){const x=h().userData,C=e([]),b=e([]),z=e(0),I=e(0),K=(e,a)=>C.value[e].answerKey===a,S=()=>{0!=I.value?(I.value--,z.value+=704):p({title:"已经是第一题了",icon:"none"})},q=()=>{9!=I.value?(I.value++,z.value-=704):p({title:"已经是最后一题了",icon:"none"})},A=()=>{p({title:"正在提交答案...",icon:"loading"});const e={userAnswers:C.value,userId:x.id};var a;(a=e,y({url:"/post-answer",method:"POST",params:{data:a}})).then((e=>{f({url:`/pages/answer-result/answer-result?result=${JSON.stringify(e.data)}`})})).catch((e=>{console.log(e)}))};return g((e=>{(function(e,a){return y({url:"/getQuestion",method:"GET",params:{data:e,userId:a}})})(e.selectQuestionList,x.id).then((e=>{b.value=e.data.data,b.value.forEach((e=>{const a={_id:e._id,answerKey:""};C.value.push(a)}))}))})),(e,p)=>{const f=t,g=k(v("u-button"),m);return a(),s(f,{class:"knowledge-page"},{default:l((()=>[o(f,{class:"knowledge-warp"},{default:l((()=>[o(f,{class:"knowledge-title"},{default:l((()=>[n("h2",{style:{color:"#fff"}},"知识问答")])),_:1}),o(f,{class:"point"},{default:l((()=>[(a(),u(i,null,r(10,(e=>n("span",{key:e,class:_({active:e<I.value}),onClick:a=>(e=>{I.value=e,z.value=-352*e*2})(e)},null,10,["onClick"]))),64))])),_:1}),o(f,{class:"knowledge-card-warp"},{default:l((()=>[o(f,{class:"knowledge-cards",style:c({left:z.value+"rpx"})},{default:l((()=>[(a(!0),u(i,null,r(b.value,((e,t)=>(a(),s(f,{class:"knowledge-card",key:t},{default:l((()=>[o(f,{class:"title"},{default:l((()=>[n("span",null,w(e.title),1)])),_:2},1024),o(f,{class:"options"},{default:l((()=>[(a(!0),u(i,null,r(e.optionsData,((e,o)=>(a(),s(f,{class:_(["option",{active:K(t,o)}]),onClick:e=>((e,a,s)=>{C.value[s].answerKey=a})(0,o,t)},{default:l((()=>[d(w(o)+". "+w(e),1)])),_:2},1032,["onClick","class"])))),256))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"])])),_:1}),o(f,{class:"knowledge-buttons"},{default:l((()=>[o(f,{class:"previous",style:{color:"#fff","font-size":"14px","font-weight":"700"},onClick:S},{default:l((()=>[d(" 上一题 ")])),_:1}),o(g,{type:"primary",style:{width:"200rpx"},onClick:A},{default:l((()=>[d("提交")])),_:1}),o(f,{class:"next",style:{color:"#fff","font-size":"14px","font-weight":"700"},onClick:q},{default:l((()=>[d(" 下一题 ")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-e4710b16"]]);export{x as default};
